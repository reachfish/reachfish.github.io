---

title: unix v6知识点学习
date: 2017/9/3 09:00:00

---

### 代码段和数据段

进程被分配了代码段及数据段的两个连续的物理内存区域。

代码段被映射到虚拟地址空间的最低位地址。

数据段由PPDA、数据区域、栈区域3部分组成
数据区域被映射到位于代码段之后的虚拟地址空间，起始地址以8KB为边界对齐。通过系统调用，数据区域可以向虚拟地址的高位方向扩展。
栈区域被映射到虚拟地址空间的最高位地址。根据需要向虚拟地址的低位方向自动扩展。

### 创建进程

子进程复制数据
* 复制proc[]数组元素
 * 子进程的proc.p_ppid指向父进程的proc.p_pid
* 复制数据段
 * 复制对象包括PPDA。子进程继承了已打开的文件和当前目录等数据
 * 子进程的user.p_procp指向proc[]中代表子进程的元素
 * 代码段不是复制对象。子进程与父进程共享text[]中的相同元素。text[]用来管理代码段

